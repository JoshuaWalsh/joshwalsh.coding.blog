<!DOCTYPE html><html><head><title>Coding Blog Boilerplate | Playing .lrc files in the browser</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" href="/coding-blog-boilerplate/favicon.ico"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined&amp;display=swap" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><link href="/coding-blog-boilerplate/styles/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/coding-blog-boilerplate/bundle/codedoc-bundle.js"></script><script>window.githubConfig={"repo":"coding-blog-boilerplate","user":"CONNECT-platform"}</script><style>.container{padding-top: 0 !important}</style><style>#-codedoc-toc { backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px) }</style><meta name="twitter:title" content="Coding Blog Boilerplate | Playing .lrc files in the browser"><meta property="og:type" content="article"><meta property="og:title" content="Coding Blog Boilerplate | Playing .lrc files in the browser"><meta name="keywords" content=""><meta property="blog-tags" content=""></head><body><div class="header-0-0-4"><a class="watermark-0-0-3" href="https://coding.blog" target="_blank"><svg viewBox="0 0 701 443" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="coding.blog" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-162.000000, -246.000000)" id="Shape"><path d="M538.081948,246.348452 L538.52402,246.445719 L538.52402,246.445719 L538.85529,246.526578 L538.85529,246.526578 L600.956012,263.165455 C602.767076,263.660918 604.526214,264.465865 606.146589,265.591976 C611.80881,269.527048 614.090389,276.211909 612.345003,282.123825 L538.2641,559.728905 C537.816127,561.562539 536.989561,563.335054 535.765607,564.944016 C530.70443,571.597248 520.764856,572.934442 513.564947,567.930724 C507.902727,563.995652 505.621148,557.310791 507.366534,551.398875 L577.145082,289.91439 L546.233523,281.631663 L462.305576,595.917544 L468.439004,634.645619 L493.907962,603.194573 C499.468987,596.327279 509.54413,595.268339 516.411424,600.829364 C523.278717,606.390389 524.337658,616.465532 518.776633,623.332826 L470.948283,682.395919 C466.887248,687.410879 460.418878,689.3283 454.55045,687.832105 L454.212574,687.741996 C448.224449,686.200133 443.421088,681.240355 442.392221,674.744345 L430.503202,599.680031 C430.418831,599.147339 430.361793,598.616628 430.331048,598.089327 C429.783912,595.705405 429.838457,593.220092 430.535776,590.858154 L519.361965,258.223717 L519.447729,257.889555 L519.447729,257.889555 L519.532157,257.586199 L519.627058,257.23399 C520.074771,255.398716 520.901697,253.624577 522.126677,252.014264 C525.828762,247.147643 532.141006,245.125338 538.081948,246.348452 Z M632.156421,656.157784 C640.992977,656.157784 648.156421,663.321228 648.156421,672.157784 C648.156421,680.99434 640.992977,688.157784 632.156421,688.157784 L528.156421,688.157784 C519.319865,688.157784 512.156421,680.99434 512.156421,672.157784 C512.156421,663.321228 519.319865,656.157784 528.156421,656.157784 L632.156421,656.157784 Z M699.234631,342.452157 L857.62655,500.844076 C863.874939,507.092464 863.874939,517.223104 857.62655,523.471493 L699.234631,681.863412 C692.986243,688.1118 682.855603,688.1118 676.607214,681.863412 C670.358826,675.615023 670.358826,665.484383 676.607214,659.235995 L823.686132,512.157077 L676.607214,365.079574 C670.358826,358.831185 670.358826,348.700545 676.607214,342.452157 C682.855603,336.203768 692.986243,336.203768 699.234631,342.452157 Z M347.705627,342.452157 C353.954016,348.700545 353.954016,358.831185 347.705627,365.079574 L200.62671,512.158491 L347.705627,659.235995 C353.954016,665.484383 353.954016,675.615023 347.705627,681.863412 C341.457239,688.1118 331.326599,688.1118 325.07821,681.863412 L166.686292,523.471493 C160.437903,517.223104 160.437903,507.092464 166.686292,500.844076 L325.07821,342.452157 C331.326599,336.203768 341.457239,336.203768 347.705627,342.452157 Z"></path></g></g></svg></a></div><div id="-codedoc-container" class="container"><script>window.source = {"base":"posts","path":"lyrics-1.md","namespace":"/coding-blog-boilerplate","title":{"base":"Coding Blog Boilerplate","connector":" | "}}</script><div class="hero-0-0-10" style="margin-bottom: -96px"><img src="/coding-blog-boilerplate/img/lyrtube.jpg" class="image-0-0-11" data-hero=""><span class="caption-0-0-12"></span></div><h1 class="h-0-0-13 white"><span style=" 
      text-shadow: 0 0 8px black; 
      font-size: 48px"><p>Playing .lrc files in the browser</p></span></h1><script id="xZYKllRIUf">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("xZYKllRIUf", "uU5Mf6hX80XLVyK7wxWrHg==", {"src":"github"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><marker><br>

</marker><p>In this post I'm reminiscing about an old project. In fact, I believe it was the first project I completed after I graduated from high-school.</p><p>Some people like to see the finished product first. If this is you, you can see this project in action at <a href="https://lyrtube.joshwalsh.me/">lyrtube.joshwalsh.me</a>. If you'd prefer some suspense, read on, I've included another link near the end of the post.</p><p><em><strong>SYNDICATED CONTENT:</strong> This post originally appeared on blog.joshwalsh.me. You can find the original <a href="https://blog.joshwalsh.me/lyrics-1/">here</a>. Some formatting and content has been removed in order to fit the <code>coding.blog</code> platform.</em></p><hr><h1 id="motivation" class="heading-0-0-14"><span class="anchor-0-0-15" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Motivation</h1><p>I find music inspiring. Music moves me in a way that other forms of art are unable to. Poetry has never interested me, but if you add in some instrumentation then suddenly it attains great significance, at least in my view.</p><p>I'm also rarely content to merely consume, I always want to contribute in some way. Unfortunately for me I am completely devoid of musical talent, so I find myself frustrated at not being able to participate in something that's so meaningful &amp; important to me. This hasn't stopped me from trying, but I'm sure anyone who's heard me sing would rather it had.</p><p>In my final year of high school I was starting to collect a few FLACs and Windows Media Player just wasn't cutting it anymore, so I switched to <a href="http://www.foobar2000.org/">foobar2000</a>. I had a lot of fun customising it to look just how I wanted.</p><p><img src="/coding-blog-boilerplate/img/fb2k.png" alt="My foobar2000 theme"></p><p>While setting up my fb2k theme I discovered a component called Lyrics Show Panel 3. This component automatically searches the internet for lyrics to songs and displays them. But of interest to me was the fact that it supported timestamped lyrics, lyrics that are synchronised to the song. I fell in love with this functionality, and pretty soon I was creating my own timestamped lyrics files for whatever mildly-obscure songs took my fancy. This scratched the itch that I had to contribute, I felt that by syncing lyrics I was enhancing the songs.</p><p>But the true reward of creating things is in sharing those things with others, and it was difficult to convince friends that they should install fb2k and LSP3 in order to view my lyrics. I needed an easy way to share my creations. I wanted to be able to just send people links and not require them to do anything but click on those links.</p><h1 id="proof-of-concept" class="heading-0-0-14"><span class="anchor-0-0-15" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Proof-of-concept</h1><p>Timestamped lyrics are (usually) stored in the <a href="https://en.wikipedia.org/wiki/LRC_(file_format)">LRC file format</a>. This is a text-based format, so it's pretty easy to parse. I threw together a proof of concept that displayed timestamped lyrics within the browser.</p><p>The logic I used for parsing the LRC files was simple. It splits the file into lines, and then it uses Regular Expressions to work out what each line contains. If the line contains a metadata tag, the metadata tag is read and the value is stored. If it contains one or more timestamps, the rest of the line is treated as lyrics and saved at the given timestamps. Otherwise, the line is ignored.</p><p>At the time I was obsessed with Canvas, (which had only recently started being supported in browsers) so I used that to draw the lyrics. I mimicked the style of Lyrics Show Panel 3: the lyrics are shown line-by-line with the currently active line vertically-centred and highlighted.</p><p>Since I'm not interested in being sued for distribution of copyrighted content, I chose not to host any of the music myself. Instead I embedded a YouTube upload of the song on the page. This also saved me having to make my own transport controls.</p><p>Something I noticed while setting this up was that the <code>getCurrentTime()</code> function exposed by the YouTube iframe Player API is only accurate if you call it infrequently. If you call it once per second it returns a result accurate to within a few milliseconds. But if you call it 60 times per second you get results that are all over the place. This initially caused the lyrics to jump and stutter. I resolved this by implementing my own timer and periodically updating it based on the time reported by YouTube. Occassionally these updates cause a small visible jump in the lyrics, but the result still looks much better than it did at first. It would be possible to eliminate these jumps by applying some smoothing to the updates, but I deemed that the issue was minor enough to ignore.</p><h1 id="abandoned-dreams" class="heading-0-0-14"><span class="anchor-0-0-15" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Abandoned dreams</h1><p>I was very proud of this proof-of-concept and thought it was going to be the Next Big Thing. This was around the time that Rap Genius (now Genius.com) had just exploded onto the internet (shortly before they got <a href="https://en.wikipedia.org/wiki/Genius_(website)#Google_search_penalty">penalised by Google for using blackhat SEO techniques</a>) so perhaps that's why I believed I had a chance at viral success with this project. I developed a simple PHP+MySQL backend for storing the lyrics in and launched LyrTube.com. I planned to turn the site into a "social network for timestamped lyrics" where users could share their own .lrc files and suggest changes to those submitted by others. I put the project on hold due to not having a suitable authentication system for it (a recurring problem for me, maybe I'll write a blog post about it at some point) and never came back to it.</p><p>Now, in 2019, I've grown tired of wasting money hosting this dead site. It's still something that I'm proud of (and nostalgic about) so I don't want to just delete it. Instead I've removed all the PHP code and converted the site into something static that I can just host from AWS S3. <a href="https://lyrtube.joshwalsh.me/">lyrtube.joshwalsh.me</a> is the final resting place of LyrTube, a website I once had grand plans for. I intend to let the old lyrtube.com domain registration lapse peacefully.</p><h1 id="conclusion" class="heading-0-0-14"><span class="anchor-0-0-15" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Conclusion</h1><p>It may seem like the story ends here, with me giving up on the LyrSync project. But that's not the case! Just because I've decided not to build a social network for lyrics, doesn't mean my obsession with them has diminished.</p><p>You can read about the next manifestation of my fixation in <a href="/coding-blog-boilerplate/lyrics-2/">part 2</a> of this series of posts.</p><hr><marker><br>

</marker><script id="mfmkzVISWm">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("mfmkzVISWm", "uU5Mf6hX80XLVyK7wxWrHg==", {"src":"github"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><script id="vyltSdMltQ">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("vyltSdMltQ", "Np8WqrudlIn6YtII/bgUUQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="contentnav-0-0-9" data-no-search=""><a href="#motivation" class="h1" data-content-highlight="motivation">Motivation</a><a href="#proof-of-concept" class="h1" data-content-highlight="proof-of-concept">Proof-of-concept</a><a href="#abandoned-dreams" class="h1" data-content-highlight="abandoned-dreams">Abandoned dreams</a><a href="#conclusion" class="h1" data-content-highlight="conclusion">Conclusion</a></div></div><div id="-codedoc-toc" class="toc-0-0-6"><div class="content-0-0-7"><p><a href="/coding-blog-boilerplate/">Home</a>
<a href="/coding-blog-boilerplate/hilbert-shader">Making an animated Hilbert Curve using WebGL</a>
<a href="/coding-blog-boilerplate/lyrics-1">Playing .lrc files in the browser</a>
<a href="/coding-blog-boilerplate/lyrics-2">One-day build: Themed animated lyrics webapp</a></p><p><br><br></p></div></div><div class="footer-0-0-5"><div class="left"><script id="wjgxJPceJM">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("wjgxJPceJM", "Y37hGkTcTeOjIepkBSGIQg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div><div class="main"><div class="inside"></div></div><div class="right"><script id="hTxrezljCL">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("hTxrezljCL", "++96ku066si1YE+LPC+GGg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div></div><script id="fIzxycigwQ">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("fIzxycigwQ", "YgUrfhgMTRkMOyJXSzrnNg==", {"namespace":"/coding-blog-boilerplate"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></body></html>